CREATE TABLE IF NOT EXISTS PUBLIC.USERS
(
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  EMAIL VARCHAR(100) NOT NULL,
  NAME VARCHAR(256),
  CONSTRAINT PK_USERS PRIMARY KEY (ID),
  CONSTRAINT UX_USERS_EMAIL UNIQUE (EMAIL)
);
COMMENT ON TABLE PUBLIC.USERS IS 'Содержит информацию о пользователях';
COMMENT ON COLUMN PUBLIC.USERS.ID IS 'Уникальный идентификатор';
COMMENT ON COLUMN PUBLIC.USERS.EMAIL IS 'Адрес электронной почты';
COMMENT ON COLUMN PUBLIC.USERS.NAME IS 'Имя пользователя';

CREATE TABLE IF NOT EXISTS PUBLIC.REQUESTS
(
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  DESCRIPTION VARCHAR(500) NOT NULL,
  REQUESTOR_ID BIGINT NOT NULL,
  CREATED TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT PK_REQUESTS PRIMARY KEY (ID),
  CONSTRAINT FK_REQUESTS_USER FOREIGN KEY (REQUESTOR_ID) REFERENCES PUBLIC.USERS (ID) ON DELETE RESTRICT ON UPDATE CASCADE
);
COMMENT ON TABLE PUBLIC.REQUESTS IS 'Содержит информацию о запросе вещи';
COMMENT ON COLUMN PUBLIC.REQUESTS.ID IS 'Уникальный идентификатор';
COMMENT ON COLUMN PUBLIC.REQUESTS.DESCRIPTION IS 'Текст запроса, содержащий описание требуемой вещи';
COMMENT ON COLUMN PUBLIC.REQUESTS.REQUESTOR_ID IS 'Пользователь, создавший запрос, ссылка на поле ID таблицы USERS';
COMMENT ON COLUMN PUBLIC.REQUESTS.CREATED IS 'Дата и время создания запроса';

CREATE TABLE IF NOT EXISTS PUBLIC.ITEMS
(
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  NAME VARCHAR(256) NOT NULL,
  DESCRIPTION VARCHAR(500) NOT NULL,
  IS_AVAILABLE BOOLEAN NOT NULL,
  OWNER_ID BIGINT NOT NULL,
  REQUEST_ID BIGINT,
  CONSTRAINT PK_ITEMS PRIMARY KEY (ID),
  CONSTRAINT FK_ITEMS_USER FOREIGN KEY (OWNER_ID) REFERENCES PUBLIC.USERS (ID) ON DELETE RESTRICT ON UPDATE CASCADE,
  CONSTRAINT FK_ITEMS_REQUEST FOREIGN KEY (REQUEST_ID) REFERENCES PUBLIC.REQUESTS (ID) ON DELETE RESTRICT ON UPDATE CASCADE
);
COMMENT ON TABLE PUBLIC.ITEMS IS 'Содержит информацию о вещах';
COMMENT ON COLUMN PUBLIC.ITEMS.ID IS 'Уникальный идентификатор';
COMMENT ON COLUMN PUBLIC.ITEMS.NAME IS 'Наименование вещи';
COMMENT ON COLUMN PUBLIC.ITEMS.DESCRIPTION IS 'Описание вещи';
COMMENT ON COLUMN PUBLIC.ITEMS.IS_AVAILABLE IS 'Статус доступности вещи';
COMMENT ON COLUMN PUBLIC.ITEMS.OWNER_ID IS 'Владелец вещи, ссылка на поле ID таблицы USERS';
COMMENT ON COLUMN PUBLIC.ITEMS.REQUEST_ID IS 'Запрос на вещь, ссылка на поле ID таблицы REQUESTS';

CREATE TABLE IF NOT EXISTS PUBLIC.BOOKINGS
(
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  START_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  END_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  ITEM_ID BIGINT NOT NULL,
  BOOKER_ID BIGINT NOT NULL,
  STATUS VARCHAR(100),
  CONSTRAINT PK_BOOKINGS PRIMARY KEY (ID),
  CONSTRAINT FK_BOOKINGS_ITEM FOREIGN KEY (ITEM_ID) REFERENCES PUBLIC.ITEMS (ID) ON DELETE RESTRICT ON UPDATE CASCADE,
  CONSTRAINT FK_BOOKINGS_USER FOREIGN KEY (BOOKER_ID) REFERENCES PUBLIC.USERS (ID) ON DELETE RESTRICT ON UPDATE CASCADE
);
COMMENT ON TABLE PUBLIC.BOOKINGS IS 'Содержит информацию о бронировании вещей';
COMMENT ON COLUMN PUBLIC.BOOKINGS.ID IS 'Уникальный идентификатор';
COMMENT ON COLUMN PUBLIC.BOOKINGS.START_DATE IS 'Дата и время начала бронирования';
COMMENT ON COLUMN PUBLIC.BOOKINGS.END_DATE IS 'Дата и время окончания бронирования';
COMMENT ON COLUMN PUBLIC.BOOKINGS.ITEM_ID IS 'Вещь, ссылка на поле ID таблицы ITEMS';
COMMENT ON COLUMN PUBLIC.BOOKINGS.BOOKER_ID IS 'Пользователь, который осуществляет бронирование, ссылка на поле ID таблицы USERS';
COMMENT ON COLUMN PUBLIC.BOOKINGS.STATUS IS 'Статус бронирования';

CREATE TABLE IF NOT EXISTS PUBLIC.COMMENTS
(
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  TEXT VARCHAR(1000) NOT NULL,
  ITEM_ID BIGINT NOT NULL,
  AUTHOR_ID BIGINT NOT NULL,
  CREATED TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT PK_COMMENTS PRIMARY KEY (ID),
  CONSTRAINT FK_COMMENTS_ITEM FOREIGN KEY (ITEM_ID) REFERENCES PUBLIC.ITEMS (ID) ON DELETE RESTRICT ON UPDATE CASCADE,
  CONSTRAINT FK_COMMENTS_USER FOREIGN KEY (AUTHOR_ID) REFERENCES PUBLIC.USERS (ID) ON DELETE RESTRICT ON UPDATE CASCADE
);
COMMENT ON TABLE PUBLIC.COMMENTS IS 'Содержит информацию об отзывах о вещях';
COMMENT ON COLUMN PUBLIC.COMMENTS.ID IS 'Уникальный идентификатор';
COMMENT ON COLUMN PUBLIC.COMMENTS.TEXT IS 'Текст отзыва';
COMMENT ON COLUMN PUBLIC.COMMENTS.ITEM_ID IS 'Вещь, ссылка на поле ID таблицы ITEMS';
COMMENT ON COLUMN PUBLIC.COMMENTS.AUTHOR_ID IS 'Автор отзыва, ссылка на поле ID таблицы USERS';
COMMENT ON COLUMN PUBLIC.COMMENTS.CREATED IS 'Дата и время создания отзыва';
